can_use_magic_window = {
	is_valid = {
		has_trait = magician_good # Add requirements here
	}
}

get_all_possible_candidates = {
	effect = {
		set_variable = {
			name = repeat_spell
			value = 1
		}
		if = {
			limit = { NOT = { exists = var:your_magic_usage } }
			set_variable = {
				name = your_magic_usage
				value = 0
			}
		}
		clear_variable_list = spell_candidates
		every_independent_ruler = {
			limit = { in_diplomatic_range = root character_is_realm_neighbor = root }
			save_scope_as = add_ruler
			root = {
				add_to_variable_list = {
					name = spell_candidates
					target = scope:add_ruler
				}
			}
		}
		if = {
			limit = { is_independent_ruler = no }
			liege = {
				every_vassal = {
					limit = { NOT = { this = root } }
					save_scope_as = add_vassal
					root = {
						add_to_variable_list = {
							name = spell_candidates
							target = scope:add_ruler
						}
					}
				}
			}
		}
		every_vassal = {
			save_scope_as = add_vassal
			root = {
				add_to_variable_list = {
					name = spell_candidates
					target = scope:add_ruler
				}
			}
		}
		every_courtier = {
			save_scope_as = add_courtier
			root = {
				add_to_variable_list = {
					name = spell_candidates
					target = scope:add_courtier
				}
			}
		}
		every_prisoner = {
			save_scope_as = add_prisoner
			root = {
				add_to_variable_list = {
					name = spell_candidates
					target = scope:add_prisoner
				}
			}
		}
		clear_variable_list = realm_candidates
		every_realm_county = {
			save_scope_as = realm_county
			root = {
				add_to_variable_list = {
					name = realm_candidates
					target = scope:realm_county
				}
			}
		}
	}
}

select_self_target = {
	scope = character
	effect = {
		set_variable = {
			name = spell_target
			value = root
		}
	}
}

select_character_target = {
	scope = character
	effect = {
		set_variable = {
			name = spell_target
			value = scope:target_char
		}
	}
}

select_spell_target = {
	scope = character
	effect = {
		set_variable = {
			name = spell_target
			value = scope:target_title
		}
	}
}

get_first_option_target = {
	scope = character
	effect = {
		ordered_in_list = {
			variable = spell_candidates
			position = 0
			save_scope_as = target_char
		}
		set_variable = {
			name = spell_target
			value = scope:target_char
		}
	}
}

get_first_option_target_title = {
	scope = character
	effect = {
		capital_county = {
			save_scope_as = target_title
		}
		set_variable = {
			name = spell_target
			value = scope:target_title
		}
	}
}

valid_cast_spell = {
	is_valid = {
		exists = var:spell_target
		has_variable = spell_target
	}
}

clear_current_target = {
	effect = {
		remove_variable = spell_target
	}
}

summon_sidhe_child = {
	scope = character
	is_valid = {
		summon_sidhe_child_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_sidhe_child_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				trigger_event = {
					id = toi_magic_event.0001
					days = { 100 600 }
				}
				add_character_modifier = {
					modifier = asked_sidhe_for_child
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
summon_sidhe_advisor = {
	scope = character
	is_valid = {
		summon_sidhe_advisor_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_sidhe_advisor_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = sidhe_advisor_martial
							years = 4
						}
					}	
					10 = {
						add_character_modifier = {
							modifier = sidhe_advisor_stewardship
							years = 4
						}
					}	
					10 = {
						add_character_modifier = {
							modifier = sidhe_advisor_intrigue
							years = 4
						}
					}	
					10 = {
						add_character_modifier = {
							modifier = sidhe_advisor_learning
							years = 4
						}
					}	
					10 = {
						add_character_modifier = {
							modifier = sidhe_advisor_diplomacy
							years = 4
						}
					}
				}
				add_character_flag = {
					flag = called_sidhe_advisor
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
summon_sidhe_feast = {
	scope = character
	is_valid = {
		summon_sidhe_feast_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_sidhe_feast_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = sidhe_in_feast
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
summon_magical_army = {
	scope = character
	is_valid = {
		summon_magical_army_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_magical_army_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				summon_magical_army_scripted_effect = yes
				
				add_character_modifier = {
					modifier = slow_magic_troops
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
summon_magical_siege_engine = {
	scope = character
	is_valid = {
		summon_magical_siege_engine_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_magical_siege_engine_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = magical_siege_engines
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
command_the_wind = {
	scope = character
	is_valid = {
		command_the_wind_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = command_the_wind_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = command_the_wind_modifier
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
hidden_blade = {
	scope = character
	is_valid = {
		hidden_blade_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = hidden_blade_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = hidden_blade_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
hidden_eye = {
	scope = character
	is_valid = {
		hidden_eye_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = hidden_eye_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = hidden_eye_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
hidden_aura = {
	scope = character
	is_valid = {
		hidden_aura_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = hidden_aura_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = hidden_aura_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
extend_lifespan = {
	scope = character
	is_valid = {
		extend_lifespan_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = extend_lifespan_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = extended_life
					years = 10
				}

			}
		}
		remove_variable = spell_fails
	}
}
channel_giant_strength = {
	scope = character
	is_valid = {
		channel_giant_strength_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = channel_giant_strength_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = giant_strenght
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
exchange_your_talents = {
	scope = character
	is_valid = {
		exchange_your_talents_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = exchange_your_talents_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				custom_description = {
					text = you_ask_the_sidhe_to_change_you
				}
				trigger_event = {
					id = toi_magic_event.0002
					days = 1
				}
				add_character_flag = {
					flag = cast_exchange_recently
					days = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
sidhe_speechcraft = {
	scope = character
	is_valid = {
		sidhe_speechcraft_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = sidhe_speechcraft_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = sidhe_speechcraft_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
heal_wounds = {
	scope = character
	is_valid = {
		heal_wounds_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = heal_wounds_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				remove_trait = wounded_1
				remove_trait = wounded_2
				remove_trait = wounded_3
			}
		}
		remove_variable = spell_fails
	}
}
inflict_wounds = {
	scope = character
	is_valid = {
		inflict_wounds_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = inflict_wounds_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			# Main Effect Here
			var:spell_target = {
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.inflict_wounds.target
					random_list = {
						60 = {
							add_trait = wounded_1
						}
						25 = {
							add_trait = wounded_2
						}
						15 = {
							add_trait = wounded_3
						}
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
inflict_terror = {
	scope = character
	is_valid = {
		inflict_terror_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = inflict_terror_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.inflict_terror.target
					add_stress = 80
				}
				add_character_flag = {
					flag = has_been_terrified
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
inflict_pestilence = {
	scope = character
	is_valid = {
		inflict_pestilence_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = inflict_pestilence_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.inflict_pestilence.target
					contract_disease_effect = { DISEASE = ill TREATMENT_EVENT = yes }
				}
				add_character_flag = {
					flag = has_been_pestilenced
					years = 10
				}
			}
		}
		remove_variable = spell_fails
	}
}
hostile_whispers = {
	scope = character
	is_valid = {
		hostile_whispers_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = hostile_whispers_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.hostile_whispers.target
					add_character_modifier = {
						modifier = bad_wishpers
						years = 5
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
captivate_mind = {
	scope = character
	is_valid = {
		captivate_mind_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = captivate_mind_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_opinion = {
					modifier = captivated_magic_opinion
					target = root
				}
			}
		}
		remove_variable = spell_fails
	}
}
bless_the_cattle = {
	scope = character
	is_valid = {
		bless_the_cattle_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = bless_the_cattle_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_county_modifier = {
					modifier = blessed_cattle
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
multiply_herds = {
	scope = character
	is_valid = {
		multiply_herds_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = multiply_herds_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				if = {
					limit = {
						development_level < 15
					}
					
					change_development_level = 20
				}
				if = {
					limit = {
						AND = {
							development_level >= 15
							development_level <= 30
						}
					}
					
					change_development_level = 10
				}
				if = {
					limit = {
						AND = {
							development_level > 30
							development_level <= 60
						}
					}
					
					change_development_level = 8
				}
				if = {
					limit = {
						development_level > 60
					}
					
					change_development_level = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Cessarian
fintan_transformation = {
	scope = character
	is_valid = {
		fintan_transformation_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = fintan_transformation_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = fintan_form
				}
			}
		}
		remove_variable = spell_fails
	}
}
deer_form = {
	scope = character
	is_valid = {
		deer_form_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = deer_form_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = deer_form
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
flood_realm = {
	scope = character
	is_valid = {
		flood_realm_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = flood_realm_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.flood_realm.target
					every_held_title = {
						limit = {
							tier = tier_county
						}
						set_variable = {
							name = cattle_number
							value = this.development_level
						}
						change_variable = {
							name = cattle_number
							multiply = 0.5
						}
						change_development_level = {
							value = var:cattle_number
							multiply = -1.0
						}
						remove_variable = cattle_number
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
mark_of_cain = {
	scope = character
	is_valid = {
		mark_of_cain_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = mark_of_cain_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				move_to_pool = yes
				add_character_modifier = {
					modifier = mark_of_cain_modifier
					years = 40
				}
			}
		}
		remove_variable = spell_fails
	}
}
serpent_bite = {
	scope = character
	is_valid = {
		serpent_bite_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = serpent_bite_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.serpent_bite.target
					random_list = {
						55 = {
							contract_disease_effect = { DISEASE = pneumonic TREATMENT_EVENT = no }
						}
						30 = {
							contract_disease_effect = { DISEASE = leper TREATMENT_EVENT = no }
						}
						15 = {
							contract_disease_effect = { DISEASE = great_pox TREATMENT_EVENT = no }
						}
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
garden_eden = {
	scope = character
	is_valid = {
		garden_eden_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = garden_eden_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				every_held_title = {
					limit = {
						tier = county
					}
					change_development_level = 10
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Fomorian
call_sea_armies = {
	scope = character
	is_valid = {
		call_sea_armies_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = call_sea_armies_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				call_sea_army_scripted_effect = yes
				add_character_flag = {
					flag = has_called_sea_armies
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
call_underground_ridri = {
	scope = character
	is_valid = {
		call_underground_ridri_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = call_underground_ridri_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				call_underground_ridri_scripted_effect = yes
				
				create_character = {
					age = 30
					random_traits = yes
					prowess = 18
					gender_female_chance = 25
					dynasty = generate
					faith = faith:dark_gods
					culture = root.culture
					employer = root
					save_scope_as = underground_ridri
				}
				scope:underground_ridri = {
					add_trait = fomorian
				}
				add_character_flag = {
					flag = has_called_sea_ridri
					years = 7
				}
			}
		}
		remove_variable = spell_fails
	}
}
fomorian_transformation = {
	scope = character
	is_valid = {
		fomorian_transformation_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = fomorian_transformation_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				root.house = {
					save_scope_as = target_house
				}
				remove_trait = cessarian
				remove_trait = partholonian
				remove_trait = nemedian
				remove_trait = fir_bolg
				remove_trait = tuatha_de_danann
				remove_trait = milesian
				remove_trait = celtic_human
				remove_trait = megalith_human		
				remove_trait = gaelic_giant
				remove_trait = hy_brazylian
				remove_trait = latin_human
				add_trait = fomorian
				set_house = scope:target_house
				add_stress = 100
				add_character_modifier = {
					modifier = painful_transformation
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
destroy_essence = {
	scope = character
	is_valid = {
		destroy_essence_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = destroy_essence_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				if = {
					limit = {
						is_ai = no
					}
					send_interface_toast = {
					left_icon = root
					title = tooltip.magic.destroy_essence.target
						change_variable = {
							name = your_magic_usage
							add = 3
						}
					}
				}
				if = {
					limit = {
						is_ai = yes
					}
					add_character_flag = {
						flag = cannot_use_magic
						years = 5
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
blood_moon = {
	scope = character
	is_valid = {
		blood_moon_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = blood_moon_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				if = {
					limit = {
						is_landed = no
					}
					root = {
						add_character_modifier = {
							modifier = blood_moon_sacrifice
							years = 2
						}
					}
				}
				if = {
					limit = {
						AND = {
							is_landed = yes
							highest_held_title_tier <= 3
						}
					}
					root = {
						add_character_modifier = {
							modifier = blood_moon_sacrifice
							years = 5
						}
						add_prestige = 50
					}
				}
				if = {
					limit = {
						AND = {
							is_landed = yes
							highest_held_title_tier >= 4
						}
					}
					root = {
						add_character_modifier = {
							modifier = blood_moon_sacrifice
							years = 8
						}
						add_prestige = 100
					}
				}
				root = {
					save_scope_as = killer_magic
				}
				trigger_event = {
					id = toi_magic_event.0003
					days = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
omen_of_opression = {
	scope = character
	is_valid = {
		omen_of_opression_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = omen_of_opression_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.omen_of_opression.target
					add_character_modifier = {
						modifier = omen_of_opression_modifier
						years = 5
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}


#Tuatha De danann
healing_secret = {
	scope = character
	is_valid = {
		healing_secret_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = healing_secret_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = healing_secret_modifier
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
silverarmed = {
	scope = character
	is_valid = {
		silverarmed_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = silverarmed_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				remove_trait = one_legged
				remove_trait = scarred
				remove_trait = wounded_3
				add_character_modifier = {
					modifier = silverarmed_modifier
				}
			}
		}
		remove_variable = spell_fails
	}
}
dagda_cauldron = {
	scope = character
	is_valid = {
		dagda_cauldron_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = dagda_cauldron_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = dagda_cauldron_modifier
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
lugh_strenght = {
	scope = character
	is_valid = {
		lugh_strenght_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = lugh_strenght_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = lugh_strenght_modifier
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
call_light = {
	scope = character
	is_valid = {
		call_light_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = call_light_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = call_light_modifier
					years = 5
				}
				add_stress = -80
			}
		}
		remove_variable = spell_fails
	}
}
lost_knowledge = {
	scope = character
	is_valid = {
		lost_knowledge_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = lost_knowledge_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = lost_knowledge_modifier
					years = 10
				}
			}
		}
		remove_variable = spell_fails
	}
}
summon_new_tribe = {
	scope = character
	is_valid = {
		summon_new_tribe_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = summon_new_tribe_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				save_scope_as = war_target_ruler
				summon_new_tribe_scripted_effect = yes
			}
		}
		remove_variable = spell_fails
	}
}

#Megalithic humans
sacred_building = {
	scope = character
	is_valid = {
		sacred_building_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = sacred_building_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = sacred_building_modifier
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
suns_chosen = {
	scope = character
	is_valid = {
		suns_chosen_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = suns_chosen_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = suns_chosen_modifier
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
hunting_spirits = {
	scope = character
	is_valid = {
		hunting_spirits_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = hunting_spirits_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = hunting_spirits_modifier
					years = 4
				}
				add_prestige = 150
				add_trait = hunter_1
			}
		}
		remove_variable = spell_fails
	}
}

#Partholonian
rune_words = {
	scope = character
	is_valid = {
		rune_words_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = rune_words_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				every_knight = {
					add_character_modifier = {
						modifier = rune_words_modifier
						years = 4
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
protective_amulet = {
	scope = character
	is_valid = {
		protective_amulet_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = protective_amulet_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = protective_amulet_modifier
					years = 5
				}
				every_close_family_member = {
					add_character_modifier = {
						modifier = protective_amulet_modifier
						years = 5
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
greek_astrology = {
	scope = character
	is_valid = {
		greek_astrology_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = greek_astrology_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				random_list = {
					10 = {
						add_martial_skill = 1
					}
					10 = {
						add_intrigue_skill = 1
					}
					10 = {
						add_learning_skill = 1
					}
					10 = {
						add_stewardship_skill = 1
					}
					10 = {
						add_diplomacy_skill = 1
					}
				}
				random_list = {
					10 = {
						add_martial_skill = -1
					}
					10 = {
						add_intrigue_skill = -1
					}
					10 = {
						add_learning_skill = -1
					}
					10 = {
						add_stewardship_skill = -1
					}
					10 = {
						add_diplomacy_skill = -1
					}
					1 = {
						
					}
				}				
			}
		}
		remove_variable = spell_fails
	}
}
cursed_tablet = {
	scope = character
	is_valid = {
		cursed_tablet_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = cursed_tablet_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.cursed_tablet.target
					add_character_modifier = {
						modifier = cursed_tablet_modifier
						years = 5
					}
				}
				every_close_family_member = {
					send_interface_toast = {
						left_icon = root
						title = tooltip.magic.cursed_tablet.target
						add_character_modifier = {
							modifier = cursed_tablet_modifier
							years = 5
						}
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Nemedian
sidhe_agriculture = {
	scope = character
	is_valid = {
		sidhe_agriculture_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = sidhe_agriculture_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				every_held_title = {
					limit = {
						tier = county
					}
					add_county_modifier = {
						modifier = sidhe_agriculture_modifier
						years = 10
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
blessed_family = {
	scope = character
	is_valid = {
		blessed_family_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = blessed_family_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = blessed_family_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
nemedian_union = {
	scope = character
	is_valid = {
		nemedian_union_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = nemedian_union_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = nemedian_union_modifier
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
nemed_seduction = {
	scope = character
	is_valid = {
		nemed_seduction_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = nemed_seduction_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.nemed_seduction.target
					set_relation_lover = root
				}
				root = {
					add_character_flag = {
						flag = has_nemed_seduced_recently
						years = 10
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Fir Bolg
srengs_strenght = {
	scope = character
	is_valid = {
		srengs_strenght_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = srengs_strenght_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = srengs_strenght_modifier
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
fir_bolg_endurance = {
	scope = character
	is_valid = {
		fir_bolg_endurance_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = fir_bolg_endurance_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = fir_bolg_endurance_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
men_of_bags = {
	scope = character
	is_valid = {
		men_of_bags_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = men_of_bags_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = men_of_bags_modifier
					years = 4
				}
			}
		}
		remove_variable = spell_fails
	}
}
heavy_lifters = {
	scope = character
	is_valid = {
		heavy_lifters_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = heavy_lifters_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = heavy_lifters_modifier
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
united_in_defiance = {
	scope = character
	is_valid = {
		united_in_defiance_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = united_in_defiance_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				every_vassal_or_below = {
					limit = {
						has_trait = fir_bolg
					}
					add_opinion = {
						modifier = united_in_defiance_magic_opinion
						target = root
					}
				}
				add_character_flag = {
					flag = recently_united_in_defiance
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Milesian
path_of_destiny = {
	scope = character
	is_valid = {
		path_of_destiny_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = path_of_destiny_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				capital_county.kingdom = {
					save_scope_as = target_kingdom
				}
				add_pressed_claim = target_kingdom
			}
		}
		remove_variable = spell_fails
	}
}
realm_ceremony = {
	scope = character
	is_valid = {
		realm_ceremony_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = realm_ceremony_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = realm_ceremony_modifier
					years = 2
				}
			}
		}
		remove_variable = spell_fails
	}
}
enchant_bedroooms = {
	scope = character
	is_valid = {
		enchant_bedroooms_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = enchant_bedroooms_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = enchant_bedroooms_modifier
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Celts
druidic_intersessions = {
	scope = character
	is_valid = {
		druidic_intersessions_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = druidic_intersessions_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = druidic_intersessions_modifier
					years = 15
				}
			}
		}
		remove_variable = spell_fails
	}
}
magic_paintings = {
	scope = character
	is_valid = {
		magic_paintings_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = magic_paintings_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = magic_paintings_modifier
					years = 2
				}
				every_close_family_member = {
					add_character_modifier = {
						modifier = magic_paintings_modifier
						years = 2
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
befriend_the_morrigan = {
	scope = character
	is_valid = {
		befriend_the_morrigan_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = befriend_the_morrigan_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = befriend_the_morrigan_modifier
					years = 10
				}
			}
		}
		remove_variable = spell_fails
	}
}
settle_power = {
	scope = character
	is_valid = {
		settle_power_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = settle_power_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_character_modifier = {
					modifier = settle_power_modifier
					years = 1
				}
			}
		}
		remove_variable = spell_fails
	}
}
influence_culture = {
	scope = character
	is_valid = {
		influence_culture_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = influence_culture_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				set_county_culture = root.culture
			}
		}
		remove_variable = spell_fails
	}
}

#Hy Brasilian
mystical_craft = {
	scope = character
	is_valid = {
		mystical_craft_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = mystical_craft_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_tales_of_abundance_lifestyle_xp = 250
				add_character_flag = {
					flag = spell_cooldown_five_years
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
two_worlds = {
	scope = character
	is_valid = {
		two_worlds_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = two_worlds_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_gold = 50
				add_prestige = 50
				add_character_flag = {
					flag = spell_cooldown_five_years
					years = 5
				}
			}
		}
		remove_variable = spell_fails
	}
}
no_escape_curse = {
	scope = character
	is_valid = {
		no_escape_curse_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = no_escape_curse_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.no_escape_curse.target
					every_held_title = {
						limit = {
							tier = county
						}
						add_county_modifier = {
							modifier = no_escape_curse_modifier
							years = 10
						}
					}
					add_character_flag = {
						flag = no_escape_curse_flag
						years = 15
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
brasil_fog = {
	scope = character
	is_valid = {
		brasil_fog_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = brasil_fog_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.brasil_fog.target
					every_child = {
						limit = {
							is_landed = no
						}
						contract_disease_effect = { DISEASE = ill TREATMENT_EVENT = yes }
					}
					add_character_flag = {
						flag = basil_fog_flag
						years = 10
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}
magic_mist = {
	scope = character
	is_valid = {
		magic_mist_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = magic_mist_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				send_interface_toast = {
					left_icon = root
					title = tooltip.magic.magic_mist.target
					add_character_modifier = {
						modifier = magic_mist_modifier
						years = 5
					}
					every_knight = {
						add_to_list = possible_target_death_knights
					}
					every_courtier = {
						add_to_list = possible_target_death_courtier
					}
					random_in_list = {
						list = possible_target_death_knights
						trigger_event = {
							id = toi_magic_event.0004
							days = 1
						}
					}
					random_in_list = {
						list = possible_target_death_courtier
						save_scope_as = future_dead
					}
					random_in_list = {
						list = possible_target_death_courtier
						limit = {
							NOT = {
								this = scope:future_dead
							}
						}
						save_scope_as = future_dead_two
					}
					scope:future_dead = {
						trigger_event = {
							id = toi_magic_event.0004
							days = 1
						}
					}
					scope:future_dead_two = {
						trigger_event = {
							id = toi_magic_event.0004
							days = 1
						}
					}					
					add_character_flag = {
						flag = magic_mist_flag
						years = 10
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Latin
burn_incense = {
	scope = character
	is_valid = {
		burn_incense_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = burn_incense_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				add_tales_of_abundance_lifestyle_xp = 75
				add_character_modifier = {
					modifier = burn_incense_modifier
					years = 3
				}					
			}
		}
		remove_variable = spell_fails
	}
}
roman_astrology = {
	scope = character
	is_valid = {
		roman_astrology_requirements = yes
	}
	effect = {
		play_music_cue = "mx_cue_magic"
		run_bad_effects_spell = yes
		change_variable = {
			name = your_magic_usage
			add = roman_astrology_usage
		}
		if = {
			limit = { NOT = { has_variable = spell_fails } }
			var:spell_target = {
				# Main Effect Here
				random_list = {
					10 = {
						add_martial_skill = 2
					}
					10 = {
						add_intrigue_skill = 2
					}
					10 = {
						add_learning_skill = 2
					}
					10 = {
						add_stewardship_skill = 2
					}
					10 = {
						add_diplomacy_skill = 2
					}
				}
				random_list = {
					10 = {
						add_martial_skill = -1
					}
					10 = {
						add_intrigue_skill = -1
					}
					10 = {
						add_learning_skill = -1
					}
					10 = {
						add_stewardship_skill = -1
					}
					10 = {
						add_diplomacy_skill = -1
					}
					1 = {
						
					}
				}
				random_list = {
					10 = {
						add_martial_skill = -1
					}
					10 = {
						add_intrigue_skill = -1
					}
					10 = {
						add_learning_skill = -1
					}
					10 = {
						add_stewardship_skill = -1
					}
					10 = {
						add_diplomacy_skill = -1
					}
					1 = {
						
					}
				}
			}
		}
		remove_variable = spell_fails
	}
}

#Not spells, must keep
increase_times_repeated = {
	is_valid = {
		var:repeat_spell < 10
	}
	effect = {
		change_variable = {
			name = repeat_spell
			add = 1
		}
	}
}

decrease_times_repeated = {
	is_valid = {
		var:repeat_spell > 1
	}
	effect = {
		change_variable = {
			name = repeat_spell
			add = -1
		}
	}
}